# Time Node - æ—¶é—´è½´è®°å½•åº”ç”¨

ä¸€ä¸ªä»¥æ—¶é—´è½´å½¢å¼å±•ç¤ºç”Ÿæ´»è®°å½•çš„åº”ç”¨ï¼Œæ”¯æŒå¤šæ—¶é—´è½´ç®¡ç†ã€å›¾ç‰‡/è§†é¢‘ä¸Šä¼ ã€åˆ†ç±»ç­›é€‰ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **æ—¶é—´è½´å±•ç¤º**ï¼šä»¥æ—¶é—´çº¿å½¢å¼å±•ç¤ºè®°å½•ï¼Œæ”¯æŒæ‹–æ‹½æ»šåŠ¨å’Œç¼©æ”¾
- **å¤šæ—¶é—´è½´æ”¯æŒ**ï¼šå¯åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„æ—¶é—´è½´ï¼ˆå¦‚ï¼šæ¡‰æ¡‰çš„äººç”Ÿã€æˆ‘çš„æ—…è¡Œç­‰ï¼‰
- **è®°å½•ç®¡ç†**ï¼šæ”¯æŒç…§ç‰‡ã€è§†é¢‘ã€æ–‡å­—ä¸‰ç§ç±»å‹çš„è®°å½•
- **é‡è¦ç¨‹åº¦**ï¼šé€šè¿‡ level æ ‡è®°é‡è¦ç¨‹åº¦ï¼ˆ1-3çº§ï¼‰
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šä¸ºè®°å½•æ·»åŠ æ ‡ç­¾ï¼Œæ–¹ä¾¿ç­›é€‰

### ğŸ¨ äº¤äº’ä½“éªŒ
- **è™šæ‹Ÿåˆ—è¡¨**ï¼šå¤§æ•°é‡è®°å½•æ—¶åªæ¸²æŸ“å¯è§†åŒºåŸŸï¼Œæµç•…æ»šåŠ¨
- **è§†å·®èƒŒæ™¯**ï¼šä¸‰å±‚ç½‘æ ¼èƒŒæ™¯äº§ç”Ÿç©ºé—´æ„Ÿ
- **ç©ºçŠ¶æ€æ°”æ³¡**ï¼šè®°å½•é—´éš”å¤§æ—¶æ˜¾ç¤ºéšæœºæç¤ºä¿¡æ¯
- **æœ€å°å¯¼èˆª**ï¼šåº•éƒ¨å¯¼èˆªæ¡æ˜¾ç¤ºå…¨ç¨‹è¿›åº¦ï¼Œæ”¯æŒå¿«é€Ÿè·³è½¬
- **ç¼©æ”¾æ§åˆ¶**ï¼šæ”¯æŒæ”¾å¤§/ç¼©å°æ—¶é—´è½´

### ğŸ”§ æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šVue3 + Pinia + Vite
- **åç«¯**ï¼šNode.js + Express
- **æ•°æ®åº“**ï¼šSQLite (sql.js)
- **æ–‡ä»¶å­˜å‚¨**ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ŒæŒ‰å¹´æœˆç»„ç»‡

## é¡¹ç›®ç»“æ„

```
time-node/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Timeline.vue           # æ—¶é—´è½´ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TimelineNode.vue       # æ—¶é—´è½´èŠ‚ç‚¹å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ TimelineSelector.vue   # æ—¶é—´è½´é€‰æ‹©å™¨
â”‚   â”‚   â”œâ”€â”€ Minimap.vue            # æœ€å°å¯¼èˆªç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GridBackground.vue     # è§†å·®èƒŒæ™¯
â”‚   â”‚   â”œâ”€â”€ DetailModal.vue        # è®°å½•è¯¦æƒ…å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ AddRecordModal.vue     # æ·»åŠ è®°å½•å¼¹çª—
â”‚   â”‚   â””â”€â”€ CreateFirstTimelineModal.vue  # é¦–æ¬¡åˆ›å»ºæ—¶é—´è½´å¼¹çª—
â”‚   â”œâ”€â”€ composables/        # Vue Composables
â”‚   â”‚   â”œâ”€â”€ useTimeline.js          # æ—¶é—´è½´ä¸»é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useScroll.js            # æ»šåŠ¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useZoom.js              # ç¼©æ”¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ useVirtualList.js       # è™šæ‹Ÿåˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ useEmptyState.js        # ç©ºçŠ¶æ€æ°”æ³¡
â”‚   â”‚   â””â”€â”€ useDateHelpers.js       # æ—¥æœŸå·¥å…·
â”‚   â”œâ”€â”€ stores/             # Pinia Store
â”‚   â”‚   â””â”€â”€ timeline.js             # æ—¶é—´è½´çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/           # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ api.js                 # API å°è£…
â”‚   â”œâ”€â”€ App.vue             # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js             # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ server/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ index.js            # Express æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ database.js         # SQLite æ•°æ®åº“æ¨¡å—
â”‚   â”œâ”€â”€ timelineService.js  # æ—¶é—´è½´æœåŠ¡
â”‚   â”œâ”€â”€ recordService.js    # è®°å½•æœåŠ¡
â”‚   â””â”€â”€ upload.js           # æ–‡ä»¶ä¸Šä¼ å¤„ç†
â”‚
â”œâ”€â”€ data/                   # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ timeline.db         # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ image/              # å›¾ç‰‡å­˜å‚¨ï¼ˆæŒ‰å¹´æœˆç»„ç»‡ï¼‰
â”‚   â””â”€â”€ video/              # è§†é¢‘å­˜å‚¨ï¼ˆæŒ‰å¹´æœˆç»„ç»‡ï¼‰
â”‚
â”œâ”€â”€ package.json            # å‰ç«¯ä¾èµ–
â””â”€â”€ vite.config.js          # Vite é…ç½®
```

## å¿«é€Ÿå¼€å§‹

### å‰ç«¯å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### åç«¯æœåŠ¡

```bash
cd server

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 3000ï¼‰
npm start
```

## API æ¥å£

### æ—¶é—´è½´

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/timelines | è·å–æ‰€æœ‰æ—¶é—´è½´ |
| GET | /api/timelines/:id | è·å–å•ä¸ªæ—¶é—´è½´ |
| POST | /api/timelines | åˆ›å»ºæ—¶é—´è½´ |
| PUT | /api/timelines/:id | æ›´æ–°æ—¶é—´è½´ |
| DELETE | /api/timelines/:id | åˆ é™¤æ—¶é—´è½´ |
| GET | /api/timelines/:id/switch | åˆ‡æ¢æ—¶é—´è½´ï¼ˆå«è®°å½•ï¼‰ |

### è®°å½•

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/timelines/:id/records | è·å–æ—¶é—´è½´çš„æ‰€æœ‰è®°å½• |
| GET | /api/records/:id | è·å–å•ä¸ªè®°å½• |
| POST | /api/timelines/:id/records | åˆ›å»ºè®°å½• |
| PUT | /api/records/:id | æ›´æ–°è®°å½• |
| DELETE | /api/records/:id | åˆ é™¤è®°å½• |

### æ–‡ä»¶ä¸Šä¼ 

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | /api/upload | ä¸Šä¼ å•æ–‡ä»¶ |
| POST | /api/upload/multiple | ä¸Šä¼ å¤šæ–‡ä»¶ |

### ç®¡ç†

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | /api/admin/clear-all | æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ |
| GET | /api/health | å¥åº·æ£€æŸ¥ |

## æ•°æ®æ ¼å¼

### æ—¶é—´è½´

```json
{
  "name": "æ¡‰æ¡‰çš„äººç”Ÿ",
  "startDate": "2025-01-28",
  "remark": "æ¡‰æ¡‰çš„æˆé•¿è®°å½•"
}
```

### è®°å½•

```json
{
  "title": "æ¡‰æ¡‰ç¬¬ä¸€æ¬¡èµ°è·¯",
  "description": "æ¡‰æ¡‰ä»Šå¤©ç‹¬ç«‹èµ°è·¯äº†ï¼",
  "date": "2025-03-15",
  "type": "photo",
  "level": 3,
  "tags": ["æˆé•¿", "é‡Œç¨‹ç¢‘"],
  "photos": ["/uploads/image/2025-03/uuid1.jpg"]
}
```

## License

MIT
